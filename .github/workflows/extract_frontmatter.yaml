name: Extract Frontmatter from Recent Posts
on:
  push:
    branches:
      - master
      - main
  workflow_dispatch: # æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½
    inputs:
      commit_count:
        description: 'å–å¾—ã™ã‚‹ã‚³ãƒŸãƒƒãƒˆæ•°'
        required: false
        default: '20'
        type: string
jobs:
  frontmatter:
    runs-on: ubuntu-24.04
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Setup Bun
        uses: oven-sh/setup-bun@v2
        with:
          bun-version: latest
      - name: Install dependencies
        run: bun install
      - name: Extract frontmatter from recent commits
        run: |
          COMMIT_COUNT="${{ github.event.inputs.commit_count || '10' }}"
          bun run scripts/extract-frontmatter.js
      - name: Display summary
        run: |
          echo "ğŸ‰ frontmatteræŠ½å‡ºå‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸ!"
          echo "ç›´è¿‘${{ github.event.inputs.commit_count || '10' }}ä»¶ã®ã‚³ãƒŸãƒƒãƒˆã§è¿½åŠ ã•ã‚ŒãŸãƒ–ãƒ­ã‚°è¨˜äº‹ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—æ¸ˆã¿"
